<div ng-controller="EvidenceCtrl" ng-show='isLogged()' ng-init="(model.videoPath != '') ? model.popQueueElement() : '' ">
    <!-- Modal -->
    <div class="modal fade" id="streamModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" onclick="eraseTest()" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Streaming server</h4>
                </div>
                <div class="modal-body">
                  <p>
                    Because usage agreements do not allow streaming videos directly to the participants, each participant must install a streaming server in their own facilities.
                  </p>
                  <h4>Setting up your own streaming server</h4>
                  <p>
                    <ul>
                      <li>
                        Install NodeJS <code>http-server</code> by following these <a href="https://github.com/indexzero/http-server">instructions</a>.
                      </li>
                      <li>
                        Make sure videos from the three corpora (INA, DW and 3-24) are organized as follows in the same directory (hereafter denoted __ROOT__):
  <pre>__ROOT__/INA/snowden/F2_TS/*/*.mp4
__ROOT__/INA/snowden/F5_TS/*/*.mp4
__ROOT__/DW/DW-news-DE/*.mp4
__ROOT__/DW/DW-news-EN/*.mp4
__ROOT__/DW/Euromaxx-EN/*.mp4
__ROOT__/3-24/*.mp4</pre>
                      </li>
                      <li>
                        Run <code>http-server</code> to server the "mp4" videos:
                        <pre>
$ http-server -d false -i false --cors â€”c __ROOTDIR__
Starting up http-server, serving __ROOTDIR__ on: http://0.0.0.0:8080</pre>
                      </li>
                      <li>
                        Type in the URL of the streaming server (e.g. <code>http//localhost:8080</code>):
                        <div ng-controller="ParameterButtonCtrl">
                            <form id="save" ng-submit="saveVideoPreferences()">
                                <input id="localServerInput" type="text" class="form-control" ng-model="model.videoPath">
                            </form>
                        </div>
                      </li>
                    </ul>
                  </p>

                  <h4>Testing the streaming server</h4>
                    <p>
                      Pressing the Test button below will try to seek a specific frame of three different videos of the test set (one for each corpus.)<br/>
                      If the actual frame correspond to the expected screenshot, then you are good to go!
                    </p>
                    <table class="table">
                    <tr>
                      <th>
                        Corpus
                      </th>
                      <th>
                        Expected
                      </th>
                      <th>
                        Actual
                      </th>
                    </tr>
                    <tr>
                        <td>INA</td>
                        <td><img src="../img/1256.png" style="height:80px; margin-left:15px;"></td>
                        <td><div id="videoTest"></div></td>
                    </tr>
                    <tr>
                        <td>DW</td>
                        <td><img src="../img/1256.png" style="height:80px; margin-left:15px;"></td>
                        <td><div id="videoTest"></div></td>
                    </tr>
                    <tr>
<<<<<<< HEAD
                        <td>
                        <button type="button" class="btn btn-default" onclick="streamTest()">Test</button>
                        </td>
                        <td>
                            <img src="../img/1256.png" style="height:80px; margin-left:15px;">
                        </td>
                        <td>
                            <img src="../img/028.png" style="height:80px; margin-left:15px;">
                        </td>
                        <td>
                            <img src="../img/0110.png" style="height:80px; margin-left:15px;">
                        </td> 
                    </tr>
                    <tr>
                        <td></td>
                        <td>
                            <div id="videoTest1" style="margin-top:50px;"></div>
                        </td>
                        <td>
                            <div id="videoTest2" style="margin-top:50px;"></div>
                        </td>
                        <td>
                            <div id="videoTest3" style="margin-top:50px;"></div>
                        </td>  
                    </tr>
                    </table>
                    <label style="position:relative; height:40px;"></label>
=======
                        <td>3-24</td>
                        <td><img src="../img/1256.png" style="height:80px; margin-left:15px;"></td>
                        <td><div id="videoTest"></div></td>
                    </tr>
                    </table>
                    <button type="button" class="btn btn-default" onclick="streamTest()">Test</button>
>>>>>>> 0b4b9e8633af36d804538c3b48702aeee65ae0b5
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" ng-click="model.popQueueElement()" data-dismiss="modal">Let's go!</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="tutoModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Evidence Annotation Tutorial</h4>
                </div>
                <div class="modal-body">
                    Here, you will learn how to use this interface.
                    </br></br>
                    After you set the path to the streaming server (see Stream server settings), the first video will be loaded in the interface.</br>
                    You can play the video 5 seconds back or 5 seconds forward in order to find the best view of the person.</br>
                    With the green icon, you have to draw a box within the video in order to circle an entire face, verify if the name and the evidence (the preview image) are correct, and click on the green icon.</br>
                    With the red icon, you set that the annotation is wrong.</br>
                    With the blue icon ("not a name"), you set that the name that was found is wrong, therefore there is maybe no annotation to do.</br>
                    With the black icon ("?") means that you don't know.</br>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row top-padding">
            <div class="col-md-8 col-xs-12">
                <div class="row">
                    <label id="message" style="color:red;"></label>
                </div>
                <div class="row">
                    <div class="col-md-10 col-xs-12">
                        <div class="input-group">
                            <form ng-submit="model.addEntry()" class="ng-pristine ng-valid">
                                <input id="entry_input" name="entry_input" type="text" style="font-size:25px;height:50px;" class="form-control ng-pristine ng-valid" ng-model="model.user_input.person_name" ng-change="model.updateLabel()">
                            </form>
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-danger" style="height:50px;" ng-click="model.saveQueueElement('ko')">This is not a name</button>
                            </span>
                        </div>
                    </div>
                </div>
                </br>
                <div class="row">
                    <div class="col-md-12 col-xs-12">
                        <div id="video-container">
                            <video id="player" cm-video-player ng-src={{model.video}} height="360px" crossorigin="anonymous"></video>
                            <drawing id="draw" rectangle-list='rectangles'></drawing>
                            <div class="controls">
                                <div id="play-button">
                                    <button type="button" class="video-control" id="play-pause" ng-click="model.toggle_play()">
                                    {{ model.play_label }}
                                    </button>
                                </div>
                                <div id="control-bar" title="Drag to reference frame">
                                    <div id="controlsoverlay">
                                        <input width="100%" type="range" id="seek-bar" min="{{ model.infbndsec }}" max="{{ model.supbndsec }}" step="{{ (model.supbndsec - model.infbndsec) / 400 }}" ng-model="model.current_time">
                                    </div>
                                </div>
                                <div id="time-display">
                                    <label>{{ model.current_time_display }}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" ng-show="model.isDisplayedVideo">
                    <div class="col-md-10 col-xs-12" style="margin:auto;">
                        <div id="not_evidence_button_id">
                            <div class="btn-group btn-group-justified" role="group" aria-label="...">
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-danger btn-lg" ng-click="model.saveQueueElement('no')">Wrong annotation</button>
                                </div>
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-default btn-lg" ng-click="model.saveQueueElement('nk')">I don't know</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-xs-12" style="margin-top:43px;">
                <div class="row" ng-show="model.isDisplayedVideo">
                    <div class="col-md-12 col-xs-12">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <label id="label_name"></label>
                            </div>
                            <div class="panel-body">
                                <canvas id="recup" style="position:relative; display:none;"></canvas>
                                <canvas id="evid" style="position:relative; display:none;"></canvas>
                                <div id="evidenceImages" style="float:left; display:none; width:100%">
                                    <img id="evidence" class="img-responsive" width="100%"/>
                                </div>
                                <label style="position:relative; height:360px;"></label>
                            </div>
                            <div class="panel-footer">
                                <div class="btn-group btn-group-justified" role="group" aria-label="...">
                                    <div class="btn-group" role="group">
                                        <button type="button" id="confirm" class="btn btn-success btn-lg" disabled="disabled" ng-click="model.saveQueueElement('yes')" style="margin:auto;">Validation</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <input id="Xbox" style="display:none;">
                <input id="Ybox" style="display:none;">
                <input id="Wbox" style="display:none;">
                <input id="Hbox" style="display:none;">
            </div>
        </div>
    </div>
</div>
